<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>School of the Ancients â€” 1-Minute Lessons</title>
<style>
  body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; margin: 0; background:#0f0f14; color:#f5f7fb;}
  header { padding:16px 20px; border-bottom:1px solid #232536; display:flex; gap:12px; align-items:center; flex-wrap:wrap;}
  h1 { font-size:18px; margin:0; }
  .tag { font-size:12px; background:#1c1f2e; padding:6px 10px; border-radius:999px; border:1px solid #2a2d42;}
  main { max-width:780px; margin:24px auto; padding:0 16px 60px; }
  .card { background:#141826; border:1px solid #232536; border-radius:14px; padding:20px; box-shadow:0 10px 30px rgba(0,0,0,.25);}
  .row { display:flex; gap:10px; flex-wrap:wrap; margin:10px 0 0; }
  button { background:#2b67f6; color:white; border:0; padding:12px 14px; border-radius:10px; cursor:pointer; font-weight:600; }
  button.secondary { background:#232536; border:1px solid #2a2d42; color:#cdd3e1; }
  button:disabled{opacity:.5; cursor:not-allowed}
  select, input[type="text"] { background:#0f1320; color:#e8ecf7; border:1px solid #2a2d42; border-radius:10px; padding:10px; }
  .dim { color:#aab2c8; font-size:13px; }
  .choices button { flex:1 1 180px; }
  .footer { margin-top:14px; border-top:1px dashed #2a2d42; padding-top:12px; }
  .pill { display:inline-block; padding:6px 10px; border-radius:999px; background:#101522; border:1px solid #2a2d42; margin-right:6px; }
  .small { font-size:12px; }
  .mt8{margin-top:8px}.mt12{margin-top:12px}.mt16{margin-top:16px}.mt24{margin-top:24px}
</style>
</head>
<body>
  <header>
    <h1>School of the Ancients</h1>
    <span class="tag">No headset required</span>
    <span class="tag">1-minute Socratic micro-lessons</span>
  </header>

  <main>
    <div class="card">
      <div class="row" style="align-items:center; justify-content:space-between">
        <div>
          <div class="dim small">Pick a figure</div>
          <select id="lessonPicker">
            <option value="socrates">Socrates â€” What is courage?</option>
            <option value="einstein">Einstein â€” Why E=mcÂ² matters</option>
            <option value="cleopatra">Cleopatra â€” Leverage beats force</option>
            <option value="davinci">Leonardo da Vinci â€” What is perspective?</option>
          </select>
        </div>
        <div class="row">
          <button id="startBtn">Start 1-minute demo</button>
          <button id="replayBtn" class="secondary" disabled>Replay line (ðŸ”Š)</button>
        </div>
      </div>

      <div id="stage" class="mt16">
        <div id="scene" class="dim small">Tip: Click a choice to continue. Audio uses your deviceâ€™s built-in voice.</div>
        <div id="line" class="mt12" style="font-size:20px; line-height:1.4;"></div>
        <div id="choices" class="choices row mt12"></div>

        <div id="takeaway" class="mt16"></div>
        <div id="sources" class="mt12 small"></div>
        <div id="quiz" class="mt16"></div>

        <div id="cta" class="footer mt16" style="display:none;">
          <div class="dim small">Like this? Join the CU beta:</div>
          <div class="row mt8">
            <input id="email" type="text" placeholder="email@colorado.edu" />
            <button id="copyResults" class="secondary">Copy results</button>
          </div>
          <div id="copied" class="small mt8" style="display:none;">Results copied. Paste into an email/DM to join.</div>
        </div>
      </div>
    </div>

    <p class="dim small mt12">Made for quick validation: 2-level branching, explicit takeaway, sources, and 2 auto-check questions.</p>
  </main>

<script>
/* ---------- LESSONS: 2-level branch, then takeaway + 2 checks ---------- */
const LESSONS = {
  socrates: {
    title: "Socrates â€” What is courage?",
    nodes: {
      start: { line: "If courage means â€˜no fear,â€™ fools are bravest. If â€˜always fear,â€™ none are brave. Which sounds right to you?",
        choices: [
          { text: "A) No fear", next: "noFear" },
          { text: "B) Always fear", next: "alwaysFear" },
          { text: "C) Act despite fear", next: "despite" }
        ]
      },
      noFear: { line: "Then the reckless drunk charging a cliff is our hero? Perhaps courage needs judgment.", next: "ending" },
      alwaysFear: { line: "If we all fear always, who advances? Maybe courage is our relation to the good.", next: "ending" },
      despite: { line: "Closer. But â€˜despiteâ€™ what, and for whose good? Add judgment to action.", next: "ending" },
      ending: {
        takeaway: "Courage = knowing fear + judging the good + acting anyway.",
        sources: [
          "Plato, Laches 190eâ€“194e (on attempts to define courage)",
          "Aristotle, Nicomachean Ethics III (the mean between rashness and cowardice)"
        ],
        quiz: [
          { q: "Which element is essential in Socratesâ€™ view of courage?", opts: ["Fearlessness", "Judgment of the good", "Constant fear"], correct: 1 },
          { q: "What error does â€˜no fearâ€™ invite?", opts: ["Cowardice", "Rashness", "Indecision"], correct: 1 }
        ]
      }
    }
  },

  einstein: {
    title: "Einstein â€” Why E=mcÂ² matters",
    nodes: {
      start: { line: "If mass can become energy, what follows?",
        choices: [
          { text: "A) A little mass holds huge energy", next: "aLot" },
          { text: "B) Only light has energy", next: "onlyLight" },
          { text: "C) Mass and energy are unrelated", next: "unrelated" }
        ]
      },
      aLot: { line: "Yes. cÂ² is enormous, so tiny mass â†’ vast energy. Starsâ€”and reactorsâ€”run on this.", next: "ending" },
      onlyLight: { line: "Light carries energy, but E=mcÂ² says matter itself embodies energy.", next: "ending" },
      unrelated: { line: "Relativity unites them: mass is â€˜condensedâ€™ energy; they convert under the right conditions.", next: "ending" },
      ending: {
        takeaway: "Massâ€“energy equivalence: matter stores energy (E=mcÂ²). Thatâ€™s why stars shine.",
        sources: [
          "Einstein (1905), â€˜Ist die TrÃ¤gheit eines KÃ¶rpers von seinem Energieinhalt abhÃ¤ngig?â€™",
          "Einstein & Infeld (1938), The Evolution of Physics, ch. 4"
        ],
        quiz: [
          { q: "Why can tiny mass release huge energy?", opts: ["cÂ² is large", "Mass is small", "Light is fast"], correct: 0 },
          { q: "What does E=mcÂ² unite?", opts: ["Force & time", "Mass & energy", "Charge & spin"], correct: 1 }
        ]
      }
    }
  },

  cleopatra: {
    title: "Cleopatra â€” Leverage beats force",
    nodes: {
      start: { line: "You face a stronger rival. Which lever do you pull first?",
        choices: [
          { text: "A) Information", next: "info" },
          { text: "B) Loyalty", next: "loyalty" },
          { text: "C) Spectacle", next: "spectacle" }
        ]
      },
      info: { line: "Intelligence turns strength into predictability. With timing, you trade weakness for leverage.", next: "ending" },
      loyalty: { line: "Alliances outlast armies. Bind interests and you borrow power you donâ€™t own.", next: "ending" },
      spectacle: { line: "Display can reframe the negotiationâ€”when paired with substance.", next: "ending" },
      ending: {
        takeaway: "Power is negotiated: combine information, alliances, and timing to bend outcomes.",
        sources: [
          "Plutarch, Life of Antony (on Cleopatraâ€™s statecraft and presentation)",
          "Cassius Dio, Roman History 42â€“51"
        ],
        quiz: [
          { q: "Which lever is most durable?", opts: ["Spectacle", "Alliances/loyalty", "Secrecy"], correct: 1 },
          { q: "Information without timing isâ€¦", opts: ["Noise", "Force", "Charm"], correct: 0 }
        ]
      }
    }
  },

  davinci: {
    title: "Leonardo â€” What is perspective?",
    nodes: {
      start: { line: "A flat painting can feel deep. What trick makes walls become windows?",
        choices: [
          { text: "A) Linear perspective", next: "linear" },
          { text: "B) Random shading", next: "random" },
          { text: "C) Bigger skies", next: "skies" }
        ]
      },
      linear: { line: "Parallel lines meet at a vanishing point; scale shrinks with distance. Space appears.", next: "ending" },
      random: { line: "Shading helps, but without geometry the illusion collapses.", next: "ending" },
      skies: { line: "Composition matters, but depth needs structureâ€”lines, scale, atmosphere.", next: "ending" },
      ending: {
        takeaway: "Perspective = geometry + light: vanishing points, scaling, and atmospheric falloff create depth.",
        sources: [
          "Leonardoâ€™s notebooks (Treatise on Painting): linear & aerial perspective",
          "Alberti (1435), De pictura"
        ],
        quiz: [
          { q: "Which defines linear perspective?", opts: ["Random shadows", "Vanishing point geometry", "Wide canvases"], correct: 1 },
          { q: "Distant objects appearâ€¦", opts: ["Larger & sharper", "Smaller & hazier", "Same size"], correct: 1 }
        ]
      }
    }
  }
};

/* ---------- Runtime: simple state machine + TTS + quiz/CTA ---------- */
const el = id => document.getElementById(id);
const picker = el('lessonPicker');
const startBtn = el('startBtn');
const replayBtn = el('replayBtn');
const scene = el('scene');
const line = el('line');
const choices = el('choices');
const takeaway = el('takeaway');
const sources = el('sources');
const quiz = el('quiz');
const cta = el('cta');
const email = el('email');
const copyBtn = el('copyResults');
const copied = el('copied');

let curLesson, curNodeId, transcript=[], answers=[], score=0;

function speak(text){
  try{
    const u = new SpeechSynthesisUtterance(text);
    u.rate = 1.02; u.pitch = 1.0;
    speechSynthesis.cancel(); speechSynthesis.speak(u);
  } catch(e){}
}

function renderNode(id){
  curNodeId = id; choices.innerHTML = ""; takeaway.innerHTML=""; sources.innerHTML=""; quiz.innerHTML=""; cta.style.display="none";
  const node = curLesson.nodes[id];
  if(!node){ line.textContent = ""; return; }

  if(node.line){
    line.textContent = node.line;
    speak(node.line);
    transcript.push(`> ${node.line}`);
    replayBtn.disabled = false;
  } else {
    line.textContent = "";
    replayBtn.disabled = true;
  }

  if(node.choices){
    node.choices.forEach(ch=>{
      const b = document.createElement('button');
      b.textContent = ch.text;
      b.onclick = ()=> {
        answers.push(ch.text);
        transcript.push(ch.text);
        if(ch.next) renderNode(ch.next);
      };
      choices.appendChild(b);
    });
  } else if(node.next){
    // auto advance (for short intermediary lines)
    setTimeout(()=>renderNode(node.next), 600);
  } else if(node.takeaway){
    // ending: show takeaway, sources, quiz
    line.textContent = "Takeaway";
    speak(node.takeaway);
    takeaway.innerHTML = `<div class="pill">Takeaway</div><div class="mt8">${node.takeaway}</div>`;
    sources.innerHTML = `<div class="pill">Sources</div><ul class="mt8">` +
      node.sources.map(s=>`<li class="small">${s}</li>`).join("") + `</ul>`;

    // quiz (2 checks)
    score = 0;
    quiz.innerHTML = `<div class="pill">Quick check (2)</div>`;
    node.quiz.forEach((q,i)=>{
      const wrap = document.createElement('div'); wrap.className="mt12";
      wrap.innerHTML = `<div>${i+1}. ${q.q}</div>`;
      q.opts.forEach((opt,idx)=>{
        const btn = document.createElement('button'); btn.className="secondary mt8"; btn.textContent = opt;
        btn.onclick = ()=>{
          btn.disabled = true;
          if(idx===q.correct){ score++; btn.style.borderColor="#2b67f6"; btn.style.color="#cfe0ff"; }
          else { btn.style.opacity=".7"; }
        };
        wrap.appendChild(document.createElement('br'));
        wrap.appendChild(btn);
      });
      quiz.appendChild(wrap);
    });

    // CTA
    cta.style.display = "block";
  }
}

function start(){
  curLesson = LESSONS[picker.value];
  transcript = []; answers = []; score = 0;
  scene.textContent = curLesson.title;
  renderNode('start');
}

replayBtn.onclick = ()=> { const node = curLesson?.nodes?.[curNodeId]; if(node?.line) speak(node.line); };
startBtn.onclick = start;

copyBtn.onclick = ()=>{
  const payload = [
    `Figure: ${curLesson?.title||""}`,
    `Choices: ${answers.join(" | ")||"(none)"}`,
    `Score: ${score} / 2`,
    `Email: ${email.value||"(none)"}`,
    `Transcript:\n${transcript.join("\n")}`
  ].join("\n");
  navigator.clipboard.writeText(payload).then(()=>{
    copied.style.display="block"; setTimeout(()=>copied.style.display="none",1500);
  });
};
</script>
</body>
</html>

